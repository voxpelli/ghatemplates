From c6b10447f9e84e03ca18f486a54e5ecd3cb8597d Mon Sep 17 00:00:00 2001
From: Pelle Wessman <pelle@kodfabrik.se>
Date: Mon, 17 Jun 2024 12:07:32 +0200
Subject: [PATCH] ci: add release-please

---
 .github/release-please/config.json   | 21 +++++++++++++++++++++
 .github/release-please/manifest.json |  1 +
 .github/workflows/compliance.yml     | 21 +++++++++++++++++++++
 .github/workflows/release-please.yml | 15 +++++++++++++++
 .husky/commit-msg                    |  3 +++
 5 files changed, 63 insertions(+), 0 deletion(-)
 create mode 100644 .github/release-please/config.json
 create mode 100644 .github/release-please/manifest.json
 create mode 100644 .github/workflows/compliance.yml
 create mode 100644 .github/workflows/release-please.yml
 create mode 100755 .husky/commit-msg

diff --git a/.github/release-please/config.json b/.github/release-please/config.json
new file mode 100644
index 0000000..336265d
--- /dev/null
+++ b/.github/release-please/config.json
@@ -0,0 +1,21 @@
+{
+  "$schema": "https://raw.githubusercontent.com/googleapis/release-please/v16.12.0/schemas/config.json",
+  "release-type": "node",
+  "include-component-in-tag": false,
+  "changelog-sections": [
+    { "type": "feat", "section": "ðŸŒŸ Features", "hidden": false },
+    { "type": "fix", "section": "ðŸ©¹ Fixes", "hidden": false },
+    { "type": "docs", "section": "ðŸ“š Documentation", "hidden": false },
+
+    { "type": "chore", "section": "ðŸ§¹ Chores", "hidden": false },
+    { "type": "perf", "section": "ðŸ§¹ Chores", "hidden": false },
+    { "type": "refactor", "section": "ðŸ§¹ Chores", "hidden": false },
+    { "type": "test", "section": "ðŸ§¹ Chores", "hidden": false },
+
+    { "type": "build", "section": "ðŸ¤– Automation", "hidden": false },
+    { "type": "ci", "section": "ðŸ¤– Automation", "hidden": true }
+  ],
+  "packages": {
+    ".": {}
+  }
+}
diff --git a/.github/release-please/manifest.json b/.github/release-please/manifest.json
new file mode 100644
index 0000000..49a1c07
--- /dev/null
+++ b/.github/release-please/manifest.json
@@ -0,0 +1 @@
+{".":"0.0.0"}
diff --git a/.github/workflows/compliance.yml b/.github/workflows/compliance.yml
new file mode 100644
index 0000000..40382be
--- /dev/null
+++ b/.github/workflows/compliance.yml
@@ -0,0 +1,21 @@
+name: Compliance
+
+on:
+  pull_request_target:
+    types: [opened, edited, reopened]
+
+permissions:
+  pull-requests: write
+
+jobs:
+  compliance:
+    runs-on: ubuntu-latest
+    steps:
+      - uses: mtfoley/pr-compliance-action@11b664f0fcf2c4ce954f05ccfcaab6e52b529f86
+        with:
+          body-auto-close: false
+          body-regex: '.*'
+          ignore-authors: |
+            renovate
+            renovate[bot]
+          ignore-team-members: false
diff --git a/.github/workflows/release-please.yml b/.github/workflows/release-please.yml
new file mode 100644
index 0000000..b4743f4
--- /dev/null
+++ b/.github/workflows/release-please.yml
@@ -0,0 +1,15 @@
+name: Release Please
+
+on:
+  push:
+    branches:
+      - main
+
+permissions:
+  contents: read
+  id-token: write
+
+jobs:
+  release-please:
+    uses: voxpelli/ghatemplates/.github/workflows/release-please-oidc.yml@main
+    secrets: inherit
diff --git a/.husky/commit-msg b/.husky/commit-msg
new file mode 100755
index 0000000..6eb889f
--- /dev/null
+++ b/.husky/commit-msg
@@ -0,0 +1,3 @@
+#!/usr/bin/env sh
+
+npx --no validate-conventional-commit < .git/COMMIT_EDITMSG
